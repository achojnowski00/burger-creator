import{j as e,c as d,u as h,r as j,a as N,R as l,M as B}from"./index-cbb21c03.js";import{A as I,a as b,B as S,M as R}from"./MaxWidthContentWrapper-39457365.js";const A="/burger-creator/assets/plus-icon-4ffdced5.svg",F="/burger-creator/assets/minus-icon-d2948dcc.svg";const P=({className:a,count:s,title:t,imgUrl:r,onAdd:o,onRemove:n})=>e.jsxs("div",{className:d("ingredient-input",a),children:[e.jsxs("div",{className:"ingredient-input__header",children:[e.jsx("button",{onClick:n,className:"ingredient-input__button ingredient-input__button--red",children:e.jsx("img",{src:F,alt:"Remove"})}),e.jsx("div",{children:s}),e.jsx("button",{onClick:o,className:"ingredient-input__button ingredient-input__button--green",children:e.jsx("img",{src:A,alt:"Remove"})})]}),e.jsx("div",{className:"ingredient-input__image",onClick:o,children:e.jsx("img",{src:r,alt:t})}),e.jsx("div",{className:"ingredient-input__title",children:t})]});const k=()=>{const{ingridientsState:a,onAddIngridient:s,onRemoveIngridient:t}=h(),r=j.useCallback(n=>()=>{s(n)},[s]),o=j.useCallback(n=>()=>{t(n)},[t]);return e.jsx("div",{className:"controll-panel",children:a.map(n=>{const{name:i,count:c,url:u,alternativeUrl:m}=n;return e.jsx(P,{className:"controll-panel__ingredient-input",count:c,title:i,imgUrl:m||u,onAdd:r(n),onRemove:o(n)},i)})})};function y(){const{onAddBurger:a}=N(),{onResetBurger:s,burgerState:t,error:r}=h(),[o,n]=l.useState(""),[i,c]=l.useState(""),[u,m]=l.useState("");l.useEffect(()=>{(t.length>0||r!=null&&r.length)&&u!==""&&m("")},[t,r,u]);const v=l.useCallback(g=>{c(""),n(g.target.value)},[n]),_=l.useCallback(g=>{if(g.preventDefault(),o.trim()===""){c("Burger could not be saved. Burger name cannot be empty");return}n(x=>x.trim()),a({name:o.trim(),ingredients:t.map(({url:x,name:f,additionalStyles:C})=>({name:f,url:x,additionalStyles:C}))}).then(()=>{s(),n(""),c(""),m("Burger added to favourites")}).catch(()=>{c("Could not add burger to favourites")})},[t,o,a,s]);return{inputValue:o,successMessage:u,formError:i,onInputChange:v,onSubmit:_}}const p=({text:a,className:s,type:t="ERROR"})=>e.jsx("p",{className:d("app-info",`app-info--${t.toLowerCase()}`,s),children:a});const E=({value:a,onChange:s,className:t,placeholder:r,disabled:o})=>{const[n,i]=l.useState(!1),c=()=>i(!0),u=()=>i(!1);return e.jsx("div",{className:d("app-input",{"app-input--selected":n},t),children:e.jsx("input",{className:"app-input__inner",type:"text",value:a,placeholder:r,disabled:o,onChange:s,onFocus:c,onBlur:u})})};const M=({className:a,onChange:s,formError:t,value:r,onSubmit:o})=>e.jsxs("form",{className:d("burger-name-form",a),action:"submit",onSubmit:o,children:[e.jsx(E,{className:"burger-name-form__input",value:r,onChange:s,placeholder:"input space"}),t&&e.jsx(p,{text:t}),e.jsx(I,{children:"save"})]});const H=({className:a,isCompleted:s,burger:t,burgerError:r,formError:o,inputValue:n,successMessage:i,onInputChange:c,onSubmit:u})=>e.jsxs("div",{className:d("burger",a),children:[e.jsx(b,{text:"Your Burger"}),r&&!i&&e.jsx(p,{text:r}),i&&e.jsx(p,{type:"SUCCESS",text:i}),t.length===0&&!i&&!r&&e.jsx(p,{type:"INFO",text:"Add items to create your burger. First item must be bottom bun. To finish your burger choose top bun"}),e.jsx(S,{burger:t}),s&&e.jsx(M,{formError:o,value:n,onChange:c,onSubmit:u})]}),W=({className:a})=>{const{burgerState:s,error:t}=h(),r=y(),o=l.useMemo(()=>s.some(n=>n.isTop),[s]);return e.jsx(H,{className:a,isCompleted:o,burger:s,burgerError:t,...r})};const T=()=>e.jsx("div",{className:"home-page",children:e.jsxs(R,{maxWidth:B,children:[e.jsx(b,{text:"Burger Creator",className:"home-page__header"}),e.jsxs("div",{className:"home-page__creator",children:[e.jsx(k,{}),e.jsx(W,{})]})]})}),O=T;export{O as default};
